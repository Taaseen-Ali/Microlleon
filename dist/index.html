<!DOCTYPE html>
<html>
    <head>
	<script src="https://cdn.jsdelivr.net/gh/cryptonomic/conseiljs/dist-web/conseiljs.min.js"
		integrity="sha384-IufW5flMmPmFPiUm4GlKLocLuEWZlGoCA5ukejQgI66LcXELSsraBP7dux+BE9Ds"
		     crossorigin="anonymous">
	</script>
	<meta charset="utf-8">
	<title>Microlleon</title>
	<link rel="stylesheet" href="https://bootswatch.com/4/solar/bootstrap.min.css">
    </head>
    
    <body>
	<h1>Welcome to Microlleon</h1>
	<button onclick="sendOneTez()"> Send half a tez! </button>

	<script src='../src/renderer.js'> </script>
	<script src='./bundle.js'> </script>
	<script>
	 const tezosNode = 'https://tezos-dev.cryptonomic-infra.tech:443';
	 const faucetAccount = {
	     "mnemonic": [
		 "barrel",
		 "eagle",
		 "only",
		 "cactus",
		 "wood",
		 "honey",
		 "senior",
		 "exile",
		 "much",
		 "message",
		 "turkey",
		 "below",
		 "mistake",
		 "odor",
		 "hazard"
	     ],
	     "secret": "d48266c316958ffce6abf4889ea129f47d97f265",
	     "amount": "27234390769",
	     "pkh": "tz1c3o4gk2cx81sUE7UkdcGr6NwejLw1TW7F",
	     "password": "gHMr91lqxQ",
	     "email": "iwxsmxls.zzxxtfiw@tezos.example.org"
	 }

	 
	 async function initAccount() {
	     const keystore = await conseiljs.TezosWalletUtil.unlockFundraiserIdentity(faucetAccount.mnemonic.join(' '), faucetAccount.email, faucetAccount.password, faucetAccount.pkh);
	     console.log(`account id: ${keystore.publicKeyHash}`);
	     console.log(`public key: ${keystore.publicKey}`);
	     console.log(`secret key: ${keystore.privateKey}`);
	     return keystore;
	 }


	 async function sendTransaction(accountKeystore, destination) {
	     const result = await conseiljs.TezosNodeWriter.sendTransactionOperation(tezosNode, accountKeystore, destination, 500000, 50000, '');
	     console.log(`Injected operation group id ${result.operationGroupID}`);
	 }
	 

	 async function sendOneTez() {
	     const keystore = await initAccount();
	     sendTransaction(keystore, 'tz1VxS7ff4YnZRs8b4mMP4WaMVpoQjuo1rjf');
	 }


	</script>
    </body>
</html>
